name: 'Index Updater'
on:
  push:
    branches:
      - main
    paths:
      - 'charts/papermerge/**'
  workflow_dispatch:
    inputs:
      name:
        description: 'Execute Me'
        default: 'World'
        required: true

env:
  GH_API_TOKEN: ${{ secrets.SOME_SECRET }}

jobs:
  get-charts:
    runs-on: ubuntu-latest
    steps:
      - id: command-get-charts
        name: 'echo command'
        run: |
          echo "hello world" >> $GITHUB_OUTPUT

  update-index:
    runs-on: ubuntu-latest
    needs:
      - get-charts
    steps:
      - id: command-update-index
        name: 'echo command'
        run: |
          echo "update index" >> $GITHUB_OUTPUT

  upload-artifact:
    runs-on: ubuntu-latest
    needs:
      - update-index
    steps:
      - id: command-upload
        name: 'echo command'
        run: |
          echo "uploaded" >> $GITHUB_OUTPUT

  publish:
    runs-on: ubuntu-latest
    needs:
      - upload-artifact
    steps:
      - id: command-publish
        name: 'echo command'
        run: |
          echo "published" >> $GITHUB_OUTPUT